        -:    0:Source:/home/neo/MedicamentLibrary/common/db/creational/factory/db_interface_factory.hpp
        -:    0:Graph:/home/neo/MedicamentLibrary/cmake-build-ninja--vcpkg-dbg-rel-coverage/tests/CMakeFiles/DrugLib_Tests_Unit_PqxxClient.dir/unit_tests/pqxx_client/test_pqxx_client.cpp.gcno
        -:    0:Data:/home/neo/MedicamentLibrary/cmake-build-ninja--vcpkg-dbg-rel-coverage/tests/CMakeFiles/DrugLib_Tests_Unit_PqxxClient.dir/unit_tests/pqxx_client/test_pqxx_client.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#pragma once
        -:    2:
        -:    3:#include <iostream>
        -:    4:#include <memory>
        -:    5:
        -:    6:#include "db_interface.hpp"
        -:    7:#include "mock_db_client.hpp"
        -:    8:#include "pqxx_client.hpp"
        -:    9:
        -:   10:namespace drug_lib::common::database::creational
        -:   11:{
        -:   12:    class DbInterfaceFactory
        -:   13:    {
        -:   14:    public:
function _ZN8drug_lib6common8database10creational18DbInterfaceFactory18create_pqxx_clientERKNS1_17PqxxConnectParamsE called 20 returned 100% blocks executed 11%
       20:   15:        static std::shared_ptr<interfaces::DbInterface> create_pqxx_client(const PqxxConnectParams& _params)
        -:   16:        {
       20:   17:            std::shared_ptr<interfaces::DbInterface> connect;
        -:   18:            try
        -:   19:            {
       20:   20:                connect = std::make_shared<PqxxClient>(_params);
       20:   20-block  0
branch  0 taken 20
branch  1 taken 0
       20:   21:            }
       20:   21-block  0
    $$$$$:   21-block  1
branch  0 never executed
branch  1 never executed
        -:   22:            catch (const exceptions::ConnectionException& e)
        -:   23:            {
    #####:   24:                std::cerr << e.what() << std::endl;
    $$$$$:   24-block  0
branch  0 never executed
branch  1 never executed
    $$$$$:   24-block  1
branch  2 never executed
branch  3 never executed
        -:   25:
        -:   26:                try
        -:   27:                {
    #####:   28:                    PqxxClient::create_database(_params);
    $$$$$:   28-block  0
branch  0 never executed
branch  1 never executed
    #####:   29:                    connect = std::make_shared<PqxxClient>(_params);
    $$$$$:   29-block  0
branch  0 never executed
branch  1 never executed
    #####:   30:                }
    $$$$$:   30-block  0
    $$$$$:   30-block  1
branch  0 never executed
branch  1 never executed
        -:   31:                catch (const std::exception& inner_e)
        -:   32:                {
    #####:   33:                    std::string msg = "Failed to open database connection. Cascade of fails.";
    $$$$$:   33-block  0
branch  0 never executed
branch  1 never executed
    $$$$$:   33-block  1
    #####:   34:                    msg.append(inner_e.what());
    $$$$$:   34-block  0
branch  0 never executed
branch  1 never executed
    #####:   35:                    throw exceptions::ConnectionException(msg,
    $$$$$:   35-block  0
branch  0 never executed
branch  1 never executed
    $$$$$:   35-block  1
branch  2 never executed
branch  3 never executed
    $$$$$:   35-block  2
        -:   36:                                                          errors::db_error_code::CONNECTION_FAILED);
    #####:   37:                }
    $$$$$:   37-block  0
    $$$$$:   37-block  1
branch  0 never executed
branch  1 never executed
    $$$$$:   37-block  2
    $$$$$:   37-block  3
    #####:   38:            }
    $$$$$:   38-block  0
branch  0 never executed
branch  1 never executed
    $$$$$:   38-block  1
    $$$$$:   38-block  2
branch  2 never executed
branch  3 never executed
    $$$$$:   38-block  3
       20:   39:            return connect;
       20:   40:        }
    $$$$$:   40-block  0
    $$$$$:   40-block  1
    $$$$$:   40-block  2
    $$$$$:   40-block  3
       20:   40-block  4
branch  0 taken 20
branch  1 taken 0
    $$$$$:   40-block  5
    $$$$$:   40-block  6
       20:   40-block  7
    $$$$$:   40-block  8
    $$$$$:   40-block  9
        -:   41:
        -:   42:        static std::shared_ptr<interfaces::DbInterface> create_mock_database()
        -:   43:        {
        -:   44:            return std::make_shared<MockDbClient>();
        -:   45:        }
        -:   46:
        -:   47:        template <typename... Args>
        -:   48:        static std::shared_ptr<interfaces::DbInterface> create_mock_database(Args... argv)
        -:   49:        {
        -:   50:            return std::make_shared<MockDbClient>(argv...);
        -:   51:        }
        -:   52:    };
        -:   53:}
